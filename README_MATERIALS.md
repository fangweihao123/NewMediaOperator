# 素材库功能说明

## 功能概述

素材库功能允许用户上传和管理视频、图片等素材文件，并在上传视频时选择使用这些素材。

## 主要功能

### 1. 素材上传
- **本地文件上传**：支持拖拽或点击上传本地视频、图片文件
- **链接上传**：支持通过URL链接上传素材
- **文件格式支持**：视频（mp4, avi, mov, wmv, flv, webm）、图片（jpeg, jpg, png, gif）
- **文件大小限制**：最大500MB

### 2. 素材管理
- **素材预览**：支持视频和图片的缩略图预览
- **素材信息**：显示素材名称、类型、大小、创建时间
- **素材删除**：支持删除不需要的素材
- **素材选择**：点击素材可选择使用

### 3. 视频上传集成
- **素材选择**：上传视频前必须先选择素材
- **素材应用**：上传的视频将使用选中的素材文件
- **批量处理**：支持批量上传多个视频链接

## 使用流程

### 1. 上传素材
1. 点击"上传本地素材"或"上传链接素材"按钮
2. 选择文件或输入链接
3. 填写素材名称和描述
4. 点击"上传素材"

### 2. 选择素材
1. 在素材库中点击要使用的素材
2. 素材会显示为选中状态（绿色边框）
3. 页面顶部会显示已选择的素材信息

### 3. 上传视频
1. 选择素材后，"上传视频"和"上传链接视频"按钮变为可用
2. 点击相应按钮进行视频上传
3. 上传的视频将使用选中的素材文件

## 技术实现

### 前端
- Vue 3 + Element Plus
- 响应式素材网格布局
- 拖拽上传支持
- 实时预览和状态显示

### 后端
- Express.js + Multer
- 文件存储管理
- 素材信息数据库
- 用户隔离存储

### API接口
- `GET /api/materials` - 获取素材列表
- `POST /api/materials/upload` - 上传本地素材
- `POST /api/materials/uploadUrl` - 上传链接素材
- `DELETE /api/materials/:id` - 删除素材
- `GET /api/materials/:profileId/:filename` - 访问素材文件

## 文件结构

```
backend/
├── materials/           # 素材存储目录
│   └── {profileId}/    # 用户素材目录
├── router/
│   └── MaterialRouter.js  # 素材管理路由
└── app.js              # 主应用文件

frontend/
└── src/views/features/
    └── VideoManager.vue  # 视频管理页面（包含素材库）
```

## 注意事项

1. 素材文件按用户ID隔离存储，确保数据安全
2. 支持的文件格式有限制，请确保上传正确格式的文件
3. 大文件上传可能需要较长时间，请耐心等待
4. 删除素材后，使用该素材的视频上传任务将无法正常执行
5. 建议定期清理不需要的素材以节省存储空间 